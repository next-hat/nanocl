# Nanocld daemon development image
FROM rust:1.67.0-alpine3.17

## Setup cargo-watch
RUN apk add gcc g++ make
RUN cargo install cargo-watch

## Install dependencies
RUN apk add libpq-dev util-linux tzdata git

## Setup the project
RUN mkdir -p /project
WORKDIR /project

## Setup the environment
ENV TZ=Europe/Paris
ENV RUSTFLAGS="-C target-feature=-crt-static"

## Setup the entrypoint
ENTRYPOINT ["cargo", "watch"]
